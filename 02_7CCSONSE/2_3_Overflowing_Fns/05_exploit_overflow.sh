#!/bin/bash

# Compile the vulnrable script
gcc -m32 -o 04_vuln2 04_vuln2.c &> /dev/null

# Create an object dump
objdump -d ./04_vuln2 > 06_vuln2_objdump.txt

# Try and exploit the program
strace -i ./04_vuln2 $(perl -e 'print "X"x100; print "Y"x4; print "\x01\x02\x03\x04";') &> 07_strace_results.txt

# Remove the compiled file
rm ./04_vuln2
